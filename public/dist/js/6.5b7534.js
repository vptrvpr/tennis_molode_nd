(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{29:function(t,s,n){"use strict";n.r(s);var e=n(1),r=n.n(e),a=n(5),i=n.n(a);function o(t,s,n,e,r,a,i){try{var o=t[a](i),u=o.value}catch(t){return void n(t)}o.done?s(u):Promise.resolve(u).then(e,r)}function u(t){return function(){var s=this,n=arguments;return new Promise(function(e,r){var a=t.apply(s,n);function i(t){o(a,e,r,i,u,"next",t)}function u(t){o(a,e,r,i,u,"throw",t)}i(void 0)})}}var c={name:"users",middleware:["admin","auth"],data:function(){return{users:[]}},mounted:function(){this.getUsers()},methods:{getUsers:function(){var t=this;i()({method:"GET",url:"/api/admin/user"}).then(function(s){t.users=s.data})},setActive:function(t){var s=this;i()({method:"POST",url:"/api/admin/user/active/"+t}).then(function(t){s.getUsers(),s.$notif(t)})},setAdmin:function(){var t=u(r.a.mark(function t(s){var n,e;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,i()({method:"POST",url:"/api/admin/user/admin/"+s});case 2:n=t.sent,e=n.data,this.getUsers(),this.$notif(e);case 6:case"end":return t.stop()}},t,this)}));return function(s){return t.apply(this,arguments)}}(),deleteUser:function(){var t=u(r.a.mark(function t(s){var n,e;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,i()({method:"POST",url:"/api/admin/user/delete/"+s});case 2:n=t.sent,e=n.data,this.getUsers(),this.$notif(e);case 6:case"end":return t.stop()}},t,this)}));return function(s){return t.apply(this,arguments)}}(),setHours:function(){var t=u(r.a.mark(function t(s,n,e){var a;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,i()({method:"POST",url:"/api/admin/user/set-hours",data:{user_id:s,hours_type:n,hours:e}});case 2:a=t.sent,a.data,this.getUsers();case 5:case"end":return t.stop()}},t,this)}));return function(s,n,e){return t.apply(this,arguments)}}(),isAdmin:function(t){var s=!1;return t.roles.map(function(t){1===t.id&&(s=!0)}),s}}},l=n(2),f=Object(l.a)(c,function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("v-card",{staticClass:" mx-auto vue__page_admin_users w-100",attrs:{shaped:""}},[n("v-simple-table",{scopedSlots:t._u([{key:"default",fn:function(){return[n("thead",[n("tr",[n("th",[t._v("Id")]),t._v(" "),n("th",[t._v("Имя")]),t._v(" "),n("th",[t._v("Активный")]),t._v(" "),n("th",[t._v("Часы")]),t._v(" "),n("th",[t._v("Бонусные часы")]),t._v(" "),n("th",[t._v("Управление")])])]),t._v(" "),t._l(t.users,function(s){return n("tbody",[n("tr",[n("td",[t._v(t._s(s.id))]),t._v(" "),n("td",[t.isAdmin(s)?n("i",{staticClass:"fas fa-user-shield"}):t._e(),t._v(t._s(s.name))]),t._v(" "),n("td",[n("v-chip",{staticClass:"ma-2",attrs:{color:s.is_active?t.$green:t.$blue}},[t._v("\n            "+t._s(s.is_active?"Да":"Нет")+"\n          ")])],1),t._v(" "),n("td",[n("v-btn",{attrs:{color:t.$green,fab:"","x-small":""},on:{click:function(n){return t.setHours(s.id,"hours",1)}}},[n("i",{staticClass:"fa-solid fa-plus"})]),t._v("\n          "+t._s(s.hours)+"\n          "),n("v-btn",{attrs:{color:t.$green,fab:"","x-small":""},on:{click:function(n){return t.setHours(s.id,"hours",-1)}}},[n("i",{staticClass:"fa-solid fa-minus"})])],1),t._v(" "),n("td",[n("v-btn",{attrs:{color:t.$green,fab:"","x-small":""},on:{click:function(n){return t.setHours(s.id,"bonus_hours",1)}}},[n("i",{staticClass:"fa-solid fa-plus"})]),t._v("\n          "+t._s(s.bonus_hours)+"\n          "),n("v-btn",{attrs:{color:t.$green,fab:"","x-small":""},on:{click:function(n){return t.setHours(s.id,"bonus_hours",-1)}}},[n("i",{staticClass:"fa-solid fa-minus"})])],1),t._v(" "),n("td",[n("v-btn",{attrs:{color:t.$green,fab:"","x-small":""},on:{click:function(n){return t.setActive(s.id)}}},[n("i",{staticClass:"fab fa-creative-commons-sa",staticStyle:{"font-size":"17px"}})]),t._v(" "),t.isAdmin(s)?t._e():n("v-btn",{attrs:{color:t.$green,fab:"","x-small":""},on:{click:function(n){return t.setAdmin(s.id)}}},[n("i",{staticClass:"fas fa-user-shield",staticStyle:{"font-size":"17px"}})]),t._v(" "),n("v-btn",{attrs:{color:t.$red,fab:"","x-small":""},on:{click:function(n){return t.deleteUser(s.id)}}},[n("i",{staticClass:"fas fa-user-times",staticStyle:{"font-size":"17px"}})])],1)])])})]},proxy:!0}])})],1)},[],!1,null,"a3d80bcc",null);s.default=f.exports}}]);