(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{31:function(t,s,e){"use strict";e.r(s);var n=e(1),r=e.n(n),a=e(5),i=e.n(a);function o(t,s,e,n,r,a,i){try{var o=t[a](i),u=o.value}catch(t){return void e(t)}o.done?s(u):Promise.resolve(u).then(n,r)}function u(t){return function(){var s=this,e=arguments;return new Promise((function(n,r){var a=t.apply(s,e);function i(t){o(a,n,r,i,u,"next",t)}function u(t){o(a,n,r,i,u,"throw",t)}i(void 0)}))}}var c,l,d,f={name:"users",middleware:["admin","auth"],data:function(){return{users:[]}},mounted:function(){this.getUsers()},methods:{getUsers:function(){var t=this;i()({method:"GET",url:"/api/admin/user"}).then((function(s){t.users=s.data}))},setActive:function(t){var s=this;i()({method:"POST",url:"/api/admin/user/active/"+t}).then((function(t){s.getUsers(),s.$notif(t)}))},setAdmin:(d=u(r.a.mark((function t(s){var e,n;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,i()({method:"POST",url:"/api/admin/user/admin/"+s});case 2:e=t.sent,n=e.data,this.getUsers(),this.$notif(n);case 6:case"end":return t.stop()}}),t,this)}))),function(t){return d.apply(this,arguments)}),deleteUser:(l=u(r.a.mark((function t(s){var e,n;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,i()({method:"POST",url:"/api/admin/user/delete/"+s});case 2:e=t.sent,n=e.data,this.getUsers(),this.$notif(n);case 6:case"end":return t.stop()}}),t,this)}))),function(t){return l.apply(this,arguments)}),setHours:(c=u(r.a.mark((function t(s,e,n){return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,i()({method:"POST",url:"/api/admin/user/set-hours",data:{user_id:s,hours_type:e,hours:n}});case 2:t.sent.data,this.getUsers();case 5:case"end":return t.stop()}}),t,this)}))),function(t,s,e){return c.apply(this,arguments)}),isAdmin:function(t){var s=!1;return t.roles.map((function(t){1===t.id&&(s=!0)})),s}}},v=e(2),h=Object(v.a)(f,(function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("v-card",{staticClass:"mx-auto vue__page_admin_users w-100",attrs:{shaped:""}},[e("v-simple-table",{scopedSlots:t._u([{key:"default",fn:function(){return[e("thead",[e("tr",[e("th",[t._v("Id")]),t._v(" "),e("th",[t._v("Имя")]),t._v(" "),e("th",[t._v("Активный")]),t._v(" "),e("th",[t._v("Часы")]),t._v(" "),e("th",[t._v("Бонусные часы")]),t._v(" "),e("th",[t._v("Управление")])])]),t._v(" "),t._l(t.users,(function(s){return e("tbody",[e("tr",[e("td",[t._v(t._s(s.id))]),t._v(" "),e("td",[t.isAdmin(s)?e("i",{staticClass:"fas fa-user-shield"}):t._e(),t._v(t._s(s.name))]),t._v(" "),e("td",[e("v-chip",{staticClass:"ma-2",attrs:{color:s.is_active?t.$green:t.$blue}},[t._v("\n            "+t._s(s.is_active?"Да":"Нет")+"\n          ")])],1),t._v(" "),e("td",[e("v-btn",{attrs:{color:t.$green,fab:"","x-small":""},on:{click:function(e){return t.setHours(s.id,"hours",1)}}},[e("i",{staticClass:"fa-solid fa-plus"})]),t._v("\n          "+t._s(s.hours)+"\n          "),e("v-btn",{attrs:{color:t.$green,fab:"","x-small":""},on:{click:function(e){return t.setHours(s.id,"hours",-1)}}},[e("i",{staticClass:"fa-solid fa-minus"})])],1),t._v(" "),e("td",[e("v-btn",{attrs:{color:t.$green,fab:"","x-small":""},on:{click:function(e){return t.setHours(s.id,"bonus_hours",1)}}},[e("i",{staticClass:"fa-solid fa-plus"})]),t._v("\n          "+t._s(s.bonus_hours)+"\n          "),e("v-btn",{attrs:{color:t.$green,fab:"","x-small":""},on:{click:function(e){return t.setHours(s.id,"bonus_hours",-1)}}},[e("i",{staticClass:"fa-solid fa-minus"})])],1),t._v(" "),e("td",[e("v-btn",{attrs:{color:t.$green,fab:"","x-small":""},on:{click:function(e){return t.setActive(s.id)}}},[e("i",{staticClass:"fab fa-creative-commons-sa",staticStyle:{"font-size":"17px"}})]),t._v(" "),t.isAdmin(s)?t._e():e("v-btn",{attrs:{color:t.$green,fab:"","x-small":""},on:{click:function(e){return t.setAdmin(s.id)}}},[e("i",{staticClass:"fas fa-user-shield",staticStyle:{"font-size":"17px"}})]),t._v(" "),e("v-btn",{attrs:{color:t.$red,fab:"","x-small":""},on:{click:function(e){return t.deleteUser(s.id)}}},[e("i",{staticClass:"fas fa-user-times",staticStyle:{"font-size":"17px"}})])],1)])])}))]},proxy:!0}])})],1)}),[],!1,null,"a3d80bcc",null);s.default=h.exports}}]);